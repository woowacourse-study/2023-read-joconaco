# 3.4.2 어서션

많은 언어에서 `어서션`을 언어 차원에서 지원한다.

> Java 에서의 `어서션`을 잘 정리해놓은 링크가 있어 소개합니다.
> 
> 
> [assert 예약어 - 단언문](https://velog.io/@jamie/assert)
> 

## `체크`와 비교

### 유사점

`어서션`은 `코드 계약` 을 준수하도록 강제하기 위한 방법이라는 점에서 **체크와 유사**하다.

코드가 개발 모드에서 컴파일 되거나, 테스트를 실행할 때 체크와 거의 같은 방식으로 동작한다.

- 조건이 위반되면 오류가 명백하게 보이거나, 예외가 발생한다.

### 차이점

배포를 위해 빌드할 때 보통 **컴파일에서 제외**된다

- 이유
    - 성능 향상
        - 조건 위반 확인에는 CPU 사이클이 필요하다.
        - `어서션`이 많으면, 소프트웨어의 전반적 성능이 현저히 저하될 수 있다.
    - 코드 오류 발생률 감소
        - `어서션`을 쓸 유효한 이유인지 아닌지는 프로그램에 따라 다르다.
        - 버그가 눈에 띄지 않을 가능성이 증가하지만, **고가용성**이 더 중요하다면, 적절할 수 있다.
            
            > [고가용성](https://ko.wikipedia.org/wiki/%EA%B3%A0%EA%B0%80%EC%9A%A9%EC%84%B1) - HA, High Availability
            서버나 소프트웨어가 언제든 접근 가능한 수준으로 다운 타임이 적은 성질을 의미해요.
            은행 서버나 소프트웨어는 고가용성을 갖춰야겠죠?
            > 

배포를 위한 빌드에서도 어서션을 쓸 수 있는 방법이 있고, 많은 개발팀이 이렇게 한다.

이 경우에는 `체크`와 비슷하며, 어떤 종류의 오류나 예외를 발생시키는지가 조금 다를 뿐이다.

## `UserSettings` 예시

![https://user-images.githubusercontent.com/39221443/222226673-21c6b99e-0068-42bc-8db4-f2f78e27819e.png](https://user-images.githubusercontent.com/39221443/222226673-21c6b99e-0068-42bc-8db4-f2f78e27819e.png)

`체크` 에 대해 언급했던 사항은 `어서션` 에도 해당된다.

- `코드 계약`에 **세부 조항**이 있을 때 `어서션` 을 사용하면 좋다. 하지만, 애초에 **세부 조항**을 피하는 것이 더 바람직하다.
    
    > **세부 조항**은 “위치는 100 이상을 넘을 수 없다” 같은 제약 조건을 이야기 하는 것 같아요.
    이런 제약 조건은 꼭 필요하지 않다면 없는게 CPU 자원을 아끼고, 소프트웨어의 유연성도 높일 수 있겠죠?
    > 

# `3.4.1`, `3.4.2` 요약

- 코드를 작성할 때 일종의 `코드 계약` 이 항상 만들어진다.
    - 명백한 항목이나, **세부 조항**과 같은 내용이 포함 될 수 잇따.
- `코드 계약` 의 **세부 조항**은 다른 개발자가 계약을 준수하도록 하기 위한 방법이지만, 신뢰할만한 방법은 아니다.
    - 더 나은 접근법은 명백한 항목으로 계약의 내용을 전달하는 것이다.
- 일반적으로 **컴파일러**를 사용하여 계약을 확인하는 것이 가장 신뢰할 수 있는 방법이다.
    - 이것이 가능하지 않을 때, `체크`나 `어서션`을 사용해 런타임에 계약을 확인할 수 있다.