# 7.4 시간 처리

- 절대적인 시간 : 1969년 7월 21일 02:56 UTC
- 상대적인 시간 : 5분
- 시간의 양 : 오븐에서 30분 굽기
- 시간의 단위 : 분, 초, 밀리초 등
- 표준 시간대, 일광 절약 시간, 윤년 ...

이 절에서는 위와 같이 혼동의 여지가 많은 시간 관련 개념으로부터 혼동과 오남용을 방지할 수 있는 방법을 다루고 있다.

## 7.4.1 정수로 시간을 나타내는 것은 문제가 될 수 있다.
시간을 나타낼 때 일반적으로 long이나 integer를 사용하는데, 정수는 매우 일반적인 유형이기 때문에 코드가 오용되기 쉽다.

아래는 시간을 정수로 표현했을 때 코드가 오용되는 세 가지 일반적인 경우이다.

### 1. 한 순간의 시간인가? 시간의 양인가?
   - 아래 예제는 데드라인에 대한 정보를 매개변수로 받는 상황이다.
   - 매개변수로 전달할 정수 값이 시간의 절대 순간인지, 시간의 양인지 알 수 없다.
  ![image](https://user-images.githubusercontent.com/97426362/226121769-f4c0cd49-3340-4a1f-a190-9b3d2941f74f.png)

### 2. 일치하지 않는 단위
   - 정수 유형으로는 시간의 값이 어떤 단위(밀리초, 초, 마이크로초)에 있는지 나타낼 수 없다.
   - 이로 인해 함수 간 시간 단위의 불일치와 같은 문제가 발생할 수 있다.
   - 그리고 이러한 실수로 인한 오류는 발견하기 쉽지 않을 것이다.
    ![image](https://user-images.githubusercontent.com/97426362/226122086-73beb86d-6899-47dc-a7b5-3cd24812a5be.png)
    ![image](https://user-images.githubusercontent.com/97426362/226122135-ca0cbe94-90b3-4852-9617-a24fc5c64c80.png)
    

### 3. 시간대 처리 오류
   - 일반적으로 생일에 대해 말할 때는 생일의 시간대까지 신경쓰지 않는다.
   - 하지만 아래와 같이 '1990년 12월 2일'이라는 입력값을 적절하게 처리하지 않으면, 다른 표준시의 사용자는 잘못된 생일을 볼 수 있다.
   ![image](https://user-images.githubusercontent.com/97426362/226148931-eb44a3a5-a1bb-46c2-a178-9c022f30fc5e.png)


## 7.4.2 해결책: 적절한 자료구조를 사용하라
- 시간을 처리하기 위한 라이브러리(내장 라이브러리, 타사 혹은 제 3자 오픈소스 라이브러리) 중 사용하는 언어에 가장 적합한 것을 찾기 위해 노력하자.

라이브러리를 사용하여 위 절에서 다룬 문제들을 해결할 수 있다.

1. 양으로서의 시간과 순간으로서의 시간 구분
   - 많은 시간 관련 라이브러리에서 Instant, Duration 클래스를 제공한다. Java.time 패키지도 마찬가지이다.
    > 책에서는 다른 언어에서의 라이브러리도 언급하고 있지만, 생략하겠습니다.
2. 더 이상 단위에 대한 혼동이 없다
   - Instant, Duration과 같은 유형은 단위를 유형 내에 캡슐화해 두었다.
   - 서로 다른 팩토리 함수로 단위에 따른 시간 객체를 생성할 수 있다.
    ```java
    Duration duration 1 = Duration.ofSeconds(5);
    Duration duration 2 = Duration.ofMinitues(2);
    ```
3. 시간 처리대 개선
   - 여러 라이브러리에서 LocalDateTime이라는 클래스를 제공한다.
   - 이를 이용하면 생일과 같이 정확한 '순간'과 연결하지 않고도 날짜(및 시간)을 나타낼 수 있다.