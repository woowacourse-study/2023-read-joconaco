# 10.5 테스트 철학으로부터 신중하게 선택하라
> 이번 장은 개인이 스스로 판단할 부분이 많다고 생각해서 책 내용을 바꿔 요약하거나, 개인 의견을 거의 달지 않았습니다.  
궁금하거나 의문이 생기는 부분은 같이 얘기해보면 좋겠습니다.

테스트를 둘러싼 여러 가지 철학과 방법론이 있다.  
그리고 그것들은 때때로 모 아니면 도인 것처럼 보인다.  
하지만 현실은 이렇지 않고, 옳다고 생각하는 바를 여러 철학에서 신중하게 선택할 자유가 있다.  

**테스트 주도 개발**을 예로 들면 개발자가 코드를 구현하기 전에 테스트 코드를 먼저 작성해야 한다는 것으로 유명하다.  
다들 이론적인 이점을 알고 있지만, 실제로 이렇게 하는 개발자를 만나기는 어렵다.  

하지만 여전히 많은 개발자는 테스트를 격리하고, 집중하며, 구현 세부 사항을 테스트하지 않는 등 TDD가 규정하는 많은 것들을 달성하고자 한다.

## 테스트 철학과 방법론 예시
#### 테스트 주도 개발
TDD는 실제 코드를 작성하기 전에 테스트 케이스를 먼저 작성하는 것을 지지한다.  
실제 코드는 테스트만 통과되도록 최소한으로 작성하고, 이후에 구조를 개선하고 중복을 없애기 위해 리팩터링을 한다.  
TDD 지지자들은 일반적으로 테스트 케이스를 격리하고 한 테스트 케이스는 하나의 동작만 테스트하도록 집중하며, 구현 세부 사항을 테스트하지 않는 등의 여러 다른 모범 사례를 지지한다.

#### 행동 주도 개발
BDD는 사람마다 조금씩 다른 의미를 갖는다.  
하지만 이 철학의 핵심은 **사용자, 고객, 비즈니스의 관점**에서 소프트웨어가 보여야 할 행동을 식별하는 데 집중하는 것이다.  
이런 '원하는 동작'은 소프트웨어가 개발될 수 있는 형식으로 포착되고 기록된다.  
테스트는 소프트웨어 자체의 속성보다는 이러한 '원하는 동작'을 반영해야 한다.  
이런 행동이 정확히 어떻게 포착되고 기록되는지, 어떤 이해관계자가 그 과정에 관여하는지, 그리고 얼마나 공식화되는지는 조직마다 다를 수 있다.

#### 수용 테스트 주도 개발
ATDD도 사람마다 약간 다른 의미를 갖는다.  
BDD와 비슷한데, 개인의 정의에 따라 겹치는 정도가 다르다.  
ATDD는 **고객의 관점**에서 소프트웨어가 보여줘야 하는 동작을 식별하고 소프트웨어가 전체적으로 필요에 따라 작동하는지 검증하기 위해 자동화된 **수락 테스트**를 만드는 것을 수반한다.  
TDD와 마찬가지로 실제 코드를 구현하기 전에 이러한 테스트를 생성해야 한다.  
이론적으로 합격 테스트가 모두 통과하면 소프트웨어는 완전한 것이며, 고객이 수락할 준비가 된 것이다.

## 마무리
테스트 철학 및 방법론은 개발자들이 효과적이라고 생각하는 작업 방식을 문서화한다.  
하지만 결국 **궁극적으로 달성하고자 하는 목표**가 그 목표에 도달하기 위해 선택한 작업 방식보다 더 중요하다.  

중요한 것은 우리가 좋은 품질의 테스트 코드를 철저하게 작성하고 고품질의 소프트웨어를 생산하는 것이다.  

사람마다 일하는 방식은 다르다. 어떤 철학이나 방법론을 문자 그대로 따를 때 가장 효과적으로 일할 수 있다면 좋은 일이지만, 다른 방법으로 할 때 더 효과적이라면 그것도 전적으로 좋다.

## 요약
- 코드베이스에 제출된 거의 모든 '실제 코드'는 그에 해당하는 단위 테스트가 동반되어야 한다.
- '실제 코드'가 보여주는 모든 동작에 대해 이를 실행해보고 결과를 확인하는 테스트 케이스가 작성되어야 한다.  
아주 간단한 테스트 케이스가 아니라면 각 테스트 케이스 코드는 준비, 실행 및 단언의 세 가지 부분으로 나누는 것이 일반적이다.
- 바람직한 단위 테스트의 주요 특징은 다음과 같다.
    - 문제가 생긴 코드의 정확한 탐지
    - 구현 세부 정보에 구애받지 않음
    - 실패가 잘 설명됨
    - 이해하기 쉬운 테스트 코드
    - 쉽고 빠르게 실행
- 테스트 더블은 의존성을 실제로 사용하는 것이 불가능하거나 현실적으로 어려울 때 단위 테스트에 사용할 수 있다.
    - 목
    - 스텁
    - 페이크
- 목 및 스텁을 활용한 테스트 코드는 비현실적이고 구현 세부 정보에 밀접하게 연결될 수 있다.
- 목과 스텁의 사용에 대한 필자(글쓴이)의 의견은 가능한 한 실제 의존성이 테스트에 사용되어야 한다는 것이다.  
  이렇게 할 수 없다면, 페이크가 차선책이고, 목과 스텁은 최후의 수단으로만 사용되어야 한다.