# 10 단위 테스트의 원칙

코드를 수정할 때 무심코 잘 작동하던 코드를 돌아가지 않게 만들거나, 실수할 위험이 있다.  
아주 사소한 변경이나, 좋은 의도로 변경했더라도 나쁜 결과를 가져올 수 있다.

> "딱 한 줄 고쳤는데요"

코드 변경은 언제나 위험하기 때문에 수정될 때마다 코드가 의도한 대로 작동한다는 것을 스스로 확신할 수 있는 방법이 필요하다.

테스트는 이런 확신을 하기 위한 주된 방법이다.

개발자로서 우리는 보통 자동화된 테스트를 작성하는데 집중한다.   
즉, '실제' 코드가 올바르게 작동하는지 확인하기 위해 '실제'코드를 실행해보는 테스트코드를 작성한다.  
1장에서는 테스트 수준이 어떻게 다른지 살펴봤다.  
이 마지막 두 장은 단위테스트를 집중적으로 살펴본다.

이 시점에서 **단위 테스트**에 대해 정확한 정의를 내리는 것이 유용할 테지만 안타깝게도 정확하게 내려진 정의가 없다.  
단위테스트는 상대적으로 격리된 방식으로 코드의 구별되는 단위를 테스트하는 것이다.  

**코드의 단위**라는 것이 의미하는 바는 다양할 수 있지만, 특정 클래스, 함수, 코드 파일을 의미할 때가 많다.  

**상대적으로 격리된 방식**이 의미하는 바도 다양한 해석의 여지가 있다.  
어떤 개발자들은 단위 테스트에서 테스트 대상이 되는 코드가 의존하는 코드를 차단하려고 하는 반면, 다른 개발자들은 의존하는 코드를 포함해서 테스트하고 싶어한다.  -> 10.4.6절

단위 테스트에 대한 정확한 정의는 없어도 큰 문제가 되지 않는다.

단위 테스트를 구성하는 것이 무엇인지, 자신만의 정의를 내리고 자신의 테스트가 정의에 부합하는지에 대해 집착하지 않는 것이 좋다.  

진짜로 중요한 것은 코드를 잘 테스트하고, 이 작업을 유지보수할 수 있는 방법으로 수행하는 것이다.
> 주객이 무엇인지?   
'테스트 코드'를 잘 짜는 것인지, 아니면 '프로덕션 코드'가 의도대로 동작하는지를 검증하는 것인지? 를 고민해보시면 좋을 것 같습니다.

# 10.1 단위 테스트의 기초

## 용어 정리

#### 테스트 중인 코드
'실제 코드', 테스트의 대상이 되는 코드
#### 테스트 코드
단위 테스트를 구성하는 코드.  
'실제 코드'와는 별도의 파일에 있지만 실제 코드와 일대일 매핑되곤 한다.

#### 테스트 케이스
테스트 코드의 각 파일에는 일반적으로 여러 테스트 케이스가 있고, 특정 동작이나 시나리오를 테스트한다.  
보통 다음과 같은 세 개의 섹션으로 나뉘어져 있다.
- 준비: 특정 동작을 호출하기 위한 설정 수행
- 실행: 테스트 중인 동작을 실제로 호출하는 코드
- 단언: 테스트 중인 동작이 실행되고 나면, 올바른 일이 발생했는지 확인해야 한다.  
일반적으로 반환값이 예상과 같은지?, 일부 결과 상태가 예상과 같은지? 확인한다.

> #### (참고) 주어진(given), 때(when), 그리고 나면(then)
> 일부 개발자는 준비, 실행, 단언이라는 용어보다 주어진(given), 때(when), 그리고 나면(then)이라는 용어를 선호한다. 의미하는 바는 동일하다.

<img width="646" alt="image" src="https://user-images.githubusercontent.com/39221443/227753372-e3928852-340f-4cfc-a806-ab25c2ce0be6.png">


나쁘거나 부적절하게 테스트된 코드는 언젠가 사고가 날 수밖에 없다.  
훌륭한 테스트를 하기 위해서는 테스트만 있는 것이 아니라, 좋은 테스트가 필요하다.  
 -- 다음 절에서 계속