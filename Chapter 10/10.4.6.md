# 10.4.6 목에 대한 의견
단위 테스트에서 목과 스텁을 사용하는 것에 대해 두가지 의견이 있다.  

- 목 찬성론자 == 런던 학파 == Mockist
- 고전주의자 == 디트로이트 학파 == Classicist

| 목 찬성론자 | ↔️ | 고전주의자 |
| -------- | - | ------- |
| **실제 의존성 사용** 지양 | ↔️ | **실제 의존성 사용** 최우선 |
| **상호 작용**을 테스트 | ↔️ | **코드의 결과 상태와 의존성**을 테스트|
| **어떻게** 동작하는지 확인 | ↔️ | 코드의 실행결과가 **무엇인지** 확인 |

## 목 찬성론자의 주장
단위 테스트 코드에서 **실제 의존성을 사용하는 것**을 피해야 한다.

- 단위 테스트가 더욱 격리된다.
  - 목을 사용하면, 테스트는 의존성에 대한 것들에 대해서는 관심이 없다.
  - 특정 코드에 문제가 있을 때, 해당 코드에 대한 단위 테스트에서만 실패를 유발한다.
  - 예제로 나온 "송장 잔액 테스트"에서도, 마이너스 송장 잔액에 대한 실패는 테스트 대상인 `PaymentManager`의 `settleInvoice` 함수가 아니라 `BankAccount`에 대한 테스트에서 확인하면 된다.
- 테스트 코드 작성이 더 쉬워진다.
  - 실제 의존성 설정, 하위 종속성 설정에 대한 고려가 필요 없다.

## 고전주의자의 주장
테스트에서 **실제 의존성을 사용하는 것**을 최우선으로 해야 한다.  
실제 의존성을 사용할 수 없을 때에도, 페이크를 사용하는 것을 우선해야한다.  
목과 스텁은, 페이크도 사용할 수 없을 때 최후의 수단으로 사용되어야 한다.

- 목으로는 실제 호출의 유효성을 검증할 수 없다.
  - 많은 수의 목이나 스텁을 사용하면, 코드에 문제점이 있을 때에도 테스트는 통과할 수 있다.
- 고전적 접근 방식으로는 구현 세부 사항에 대해 더 독립적인 테스트를 할 수 있다.
  - 최종 결과를 검증하는 데 중점을 두므로 구현 세부 사항이 변경되어도 테스트는 영향을 받지 않는다.

저자의 경우 개발자로 일하던 초기에는, 테스트 코드 작성을 더 쉽게 만드는 것처럼 보였기 때문에 목이나 스텁을 많이 사용했다고 한다. 하지만 그로 인해 동작이 제대로 테스트되지 않거나 리팩터링이 어려워지는 문제를 겪고 고전주의자가 되었다고 한다. 그러나 이는 언제나 개인의 의견일 뿐이다!

두 학파에 대해 더 자세히 알고 싶다면, [마틴 파울러가 쓴 기사](http://mng.bz/N8Pv)의 후반부를 참고하기를 추천한다.